<div class="row">
    <div class="col-12">
        <div class="fw-bolder fs-1 mb-2">
            Newsletter subscribers (total: {{totalRecords}})
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <button class="btn btn-mosaico-outline-secondary" (click)="reloadSubscribers()"><i
            class="fas fa-sync text-dark"></i>Refresh</button>
        <button class="btn btn-mosaico-outline-secondary" (click)="onExportCsv()"><i
                class="fas fa-file-csv text-dark"></i>Export CSV</button>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <div class="table-responsive table-responsive-xs transactions-table">
            <p-table [value]="subscribers" [lazy]="true" (onLazyLoad)="fetchSubscribers($event)"
                responsiveLayout="scroll" [paginator]="true" [rows]="pageSize" [totalRecords]="totalRecords"
                [loading]="isLoading" styleClass="table align-middle gs-0 gy-4">
                <ng-template pTemplate="header">
                    <tr>
                        <th class="min-w-150px tr text-center">Email</th>
                        <th class="min-w-150px tr text-center">Name</th>
                        <th class="min-w-150px tr text-center">Subscribed at</th>
                        <th class="min-w-150px tr text-center">Subscribed</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowIndex="rowIndex" let-subscriber>
                    <tr>
                        <td class="text-center">
                            {{subscriber.email}}
                        </td>
                        <td class="text-center">
                            {{subscriber.name}}
                        </td>
                        <td class="text-center">
                            <span *ngIf="subscriber.subscribedAt && subscriber.subscribedAt.length > 0"></span>{{subscriber.subscribedAt| date : 'dd.MM.yyyy, HH:mm'}}
                        </td>
                        <td class="text-center">
                            <i class="fa fa-check text-success"></i>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="12" class="text-center">
                            <h4>There are no subscribers</h4>
                        </td>
                    </tr>
                    <tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>